{"version":3,"sources":["webpack:///./resources/assets/js/user-list.js","webpack:///./resources/assets/js/components/Modal.vue","webpack:///./resources/assets/js/components/Modal.vue?0fd5"],"names":[],"mappings":";;;;;AAAA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA0B,KAAK;AAC/B;AACA;AACA,4FAA2F;AAC3F;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;;;;;;;AC9FD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAsD,mDAAmD,IAAI;AAC7G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;AACD,kCAAiC;;AAEjC;;;;;;;;AClCA,iBAAgB,mBAAmB;AACnC;AACA,EAAC,+BAA+B;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,E","file":"userList.js","sourcesContent":["require('./bootstrap');\n\nVue.component('modal', require('./components/Modal.vue'));\n\nvar UserList = new Vue({\n    el: '#user-list',\n    data: {\n        defaultValues: [],\n        showModal: false\n    },\n    methods: {\n        escapeHTML: function(html) {\n            return $('<div>').text(html).html();\n        },\n        updateUser: function(event, userid) {\n            // データの更新があるかをチェック\n            var changed = [];\n            var params = [\n                ['ユーザー名', 'user_'+userid+'_name'],\n                ['メールアドレス', 'user_'+userid+'_email'],\n                ['ロール', 'user_'+userid+'_role']\n            ];\n\n            for (var i=0 ; i<3; i++) {\n                if (this[params[i][1]] !== this.defaultValues[params[i][1]]) {\n                    changed[i] = '<td>'+params[i][0]+'</td><td>'\n                        +this.escapeHTML(this.defaultValues[params[i][1]])+'</td><td> -&gt;</td><td>'\n                        +this.escapeHTML(this[params[i][1]])+'</td>';\n                }\n            }\n\n            if (changed.length == 0) {\n                alert(\"変更点はありません。\");\n            }\n            else {\n                // 実行時の動作を指定する\n                var $userlist = $('#user-list-form');\n                this.showModal({\n                    title: 'ユーザー情報を変更しますか？',\n                    body: '<table class=\"table table-striped\"><tr>'+changed.join('</tr><tr>')+'</tr></table>',\n                    method: 'PUT',\n                    action: '/users/'+userid\n                });\n            }\n        },\n        deleteUser: function(event, userid) {\n            this.showModal({\n                title: 'ユーザー削除',\n                body: \"ユーザー <b>[\"+this.defaultValues['user_'+userid+'_name']+\"]</b> を削除しますか？\",\n                method: 'DELETE',\n                action: '/users/'+userid\n            });\n        },\n        showModal: function(params) {\n            var $userlist = $('#user-list-form');\n\n            // フォームデータを設定\n            $('#_method').val(params.method);\n            $userlist.attr('action', $userlist.data('url')+params.action);\n\n            // モーダルの表示内容を設定\n            $('#modal-title').text(params.title);\n            $('#modal-body').html(params.body);\n            // モーダルを表示\n            $('#modal').modal('show');\n        }\n    },\n    created: function() {\n        var that = this;\n        // テキストを全て列挙して、初期値をデータに記録する\n        $(\":text\").each(function() {\n            var $this = $(this);\n            if ($this.attr(\"id\").indexOf(\"user_\") == -1) {\n                return;\n            }\n            // 初期値をHTMLとデフォルト値として記憶\n            that[$this.attr(\"id\")] = $this.data(\"default\");\n            that.defaultValues[$this.attr(\"id\")] = $this.data(\"default\");\n        });\n        // ロールのラジオボックスを列挙\n        $(\":radio\").each(function() {\n            var $this = $(this);\n            // 要素がない場合は追加する\n            if (!that.hasOwnProperty($this.attr(\"name\"))) {\n                that[$this.attr(\"name\")] = \"\";\n                that.defaultValues[$this.attr(\"name\")] = \"\";\n            }\n            // デフォルト値を持っていたら設定\n            if ($this.data(\"default\") !== undefined) {\n                that[$this.attr(\"name\")] = $this.data(\"default\");\n                that.defaultValues[$this.attr(\"name\")] = $this.data(\"default\");\n            }\n        });\n    }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/assets/js/user-list.js\n// module id = 0\n// module chunks = 1","var __vue_exports__, __vue_options__\nvar __vue_styles__ = {}\n\n/* template */\nvar __vue_template__ = require(\"!!vue-loader/lib/template-compiler?id=data-v-4631772c!vue-loader/lib/selector?type=template&index=0!./Modal.vue\")\n__vue_options__ = __vue_exports__ = __vue_exports__ || {}\nif (\n  typeof __vue_exports__.default === \"object\" ||\n  typeof __vue_exports__.default === \"function\"\n) {\nif (Object.keys(__vue_exports__).some(function (key) { return key !== \"default\" && key !== \"__esModule\" })) {console.error(\"named exports are not supported in *.vue files.\")}\n__vue_options__ = __vue_exports__ = __vue_exports__.default\n}\nif (typeof __vue_options__ === \"function\") {\n  __vue_options__ = __vue_options__.options\n}\n__vue_options__.__file = \"/Users/yutanaka/git/lara5.3-sentinel/resources/assets/js/components/Modal.vue\"\n__vue_options__.render = __vue_template__.render\n__vue_options__.staticRenderFns = __vue_template__.staticRenderFns\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-4631772c\", __vue_options__)\n  } else {\n    hotAPI.reload(\"data-v-4631772c\", __vue_options__)\n  }\n})()}\nif (__vue_options__.functional) {console.error(\"[vue-loader] Modal.vue: functional components are not supported and should be defined in plain js files using render functions.\")}\n\nmodule.exports = __vue_exports__\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/assets/js/components/Modal.vue\n// module id = 12\n// module chunks = 1","module.exports={render:function (){var _vm=this;\n  return _vm._m(0)\n},staticRenderFns: [function (){var _vm=this;\n  return _vm._h('div', {\n    staticClass: \"modal fade\",\n    attrs: {\n      \"id\": \"modal\",\n      \"tabindex\": \"-1\",\n      \"role\": \"dialog\"\n    }\n  }, [_vm._h('div', {\n    staticClass: \"modal-dialog\"\n  }, [_vm._h('div', {\n    staticClass: \"modal-content\"\n  }, [_vm._h('div', {\n    staticClass: \"modal-header\"\n  }, [_vm._h('button', {\n    staticClass: \"close\",\n    attrs: {\n      \"type\": \"button\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\"\n    }\n  }, [_vm._h('span', {\n    attrs: {\n      \"aria-hidden\": \"true\"\n    }\n  }, [\"×\"])]), \" \", _vm._h('h4', {\n    staticClass: \"modal-title\",\n    attrs: {\n      \"id\": \"modal-title\"\n    }\n  })]), \" \", _vm._h('div', {\n    staticClass: \"modal-body\",\n    attrs: {\n      \"id\": \"modal-body\"\n    }\n  }), \" \", _vm._h('div', {\n    staticClass: \"modal-footer\"\n  }, [_vm._h('button', {\n    staticClass: \"btn btn-primary\",\n    attrs: {\n      \"type\": \"submit\",\n      \"id\": \"modal-update\"\n    }\n  }, [_vm._h('i', {\n    staticClass: \"fa fa-btn fa-check\"\n  }), \"  はい\\n          \"]), \" \", _vm._h('button', {\n    staticClass: \"btn btn-default\",\n    attrs: {\n      \"type\": \"button\",\n      \"data-dismiss\": \"modal\"\n    }\n  }, [_vm._h('i', {\n    staticClass: \"fa fa-btn fa-close\"\n  }), \"いいえ\"])])])])])\n}]}\nmodule.exports.render._withStripped = true\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-4631772c\", module.exports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-4631772c!./~/vue-loader/lib/selector.js?type=template&index=0!./resources/assets/js/components/Modal.vue\n// module id = 13\n// module chunks = 1"],"sourceRoot":""}